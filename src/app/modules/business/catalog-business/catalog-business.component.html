<!-- Популярный бизнес. -->
<!-- <h5 class="garant title-franchise">Популярный бизнес</h5> -->
<!-- <div class="d-flex popular-list">
  <div class="popular-item" *ngFor="let item of aPopularBusiness">
    <p-card header="{{item.businessName}}" subheader="{{item.text}}" [style]="{width: '100%'}"
      styleClass="p-card-shadow">
      <ng-template pTemplate="header">
        <img [src]="item.url">
      </ng-template>
      <strong>{{item.textDoPrice}} {{item.price}} ₽</strong>
      <ng-template pTemplate="footer">

      </ng-template>
    </p-card>
  </div>
</div> -->

<!-- <div class="" *ngFor="let item of aPopularBusiness">
  <p-card header="{{item.businessName}}" subheader="" [style]="{width: '100%'}" styleClass="p-card-shadow">
    <ng-template pTemplate="header">
      <img [src]="item.url" class="franchise-card-img">
    </ng-template>
  </p-card>
</div> -->

<!-- Бизнес блог. -->
<div class="row section-mb">
  <h5 class="garant title-franchise">Популярный бизнес</h5>

  <div
    class="popular-item blog-item col--xxl-3 col-xl-3 col-lg-6 col-md-6"
    *ngFor="let item of aPopularBusiness"
  >
    <p-card
      header="{{ item.title }}"
      subheader="{{ item.text }}"
      [style]="{ width: '100%' }"
      styleClass="p-card-shadow"
    >
      <ng-template pTemplate="header">
        <img [src]="item.url" class="franchise-card-img" />
      </ng-template>
    </p-card>
  </div>

  <div class="col-xxl-3 col-xl-3 col-lg-6 col-md-6">
    <div class="popular-item more-articles business-blog-video">
      <p-card
        header=""
        subheader=""
        [style]="{ width: '100%' }"
        styleClass="p-card-shadow"
      >
        <div class="more-articles-content d-flex align-items-center mt-4">
          <div class="more-articles-content-text">
            <h3 class="franchise-card-title">Больше статей</h3>
            <p class="franchise-card-description">
              Перейдите в наш блог и найдите там массу полезной информации.
            </p>
          </div>
          <img src="../../../assets/images/Frame 66.png" height="32" />
        </div>
      </p-card>
    </div>
  </div>
</div>

<div class="garant block-title-franchise">
  <h5 class="title-franchise">Каталог бизнеса</h5>
  <span class="count-franchise">Всего {{ countBusinesses }} бизнесов</span>
</div>

<div class="d-flex">
  <div class="business-search">
    <!-- <button type="button" class="btn-close btn-close--top" aria-label="Close" (click)="onClearFilters()"></button> -->
    <!-- <div>
    <strong>Сфера бизнеса</strong><br>
    <p-dropdown [options]="aViewBusiness" optionLabel="viewName" [(ngModel)]="selectedViewBusiness" placeholder="Вид бизнеса" [showClear]="true" name="view"></p-dropdown>
  </div> -->

    <div class="">
      <strong>Выбор категории</strong><br />
      <p-dropdown
        [options]="aBusinessCategories"
        optionLabel="categoryName"
        [(ngModel)]="selectedCategory"
        placeholder="Категория"
        [showClear]="true"
        name="category"
      ></p-dropdown>
    </div>

    <div class="control-quick-search">
      <strong>Выбор города</strong><br />
      <p-dropdown
        [options]="aCities"
        optionLabel="businessCityName"
        name="city"
        [(ngModel)]="selectedCity"
        placeholder="Город"
        [showClear]="true"
      ></p-dropdown>
    </div>

    <div class="d-flex">
      <div class="control-quick-search block-price-min">
        <strong>Стоимость</strong><br />
        <input
          type="text"
          class="control-input-price"
          pInputText
          placeholder="от 100 000 ₽"
          [(ngModel)]="minPrice"
          name="minPrice"
        />
      </div>

      <div class="block-price-max">
        <strong></strong><br />
        <input
          type="text"
          class="control-input-price"
          pInputText
          placeholder="до 100 000 000 ₽"
          [(ngModel)]="maxPrice"
          name="maxPrice"
        />
      </div>
    </div>
    <!-- <button type="button" class="btn-close btn-close--bottom" aria-label="Close" (click)="onClearFilters()"></button> -->
  </div>
</div>

<!-- <div class="btn-wrapper">
  <button class="btn btn--aside btn-default mt-3 btn-sm btn-filter"
    (click)="onFilterFranchisesAsync(filterForm)">Найти</button>
  <button class="btn btn--aside btn-default btn-sm mt-3 ml-1 btn-filter" (click)="onClearFilters()">Очистить
    фильтры</button>
</div> -->

<div class="block-catalog d-flex">
  <div class="">
    <div>
      <strong>Сортировать по</strong><br />
      <p-dropdown
        class="block-sort-by"
        [options]="aSortPrices"
        optionLabel="name"
        optionCode="value"
        name="price"
        [(ngModel)]="selectedSort"
        placeholder="Цена"
        [showClear]="true"
        (onChange)="onChangeSortPrice()"
      ></p-dropdown>
    </div>

    <div class="switch-garant garant-buy">
      <strong>Покупка через гарант</strong>
      <p-inputSwitch class="flag-garant" [(ngModel)]="isGarant"></p-inputSwitch>
    </div>

    <div class="switch-garant">
      <strong>Прибыль в месяц</strong><br />
      <div class="d-flex d-flex--short">
        <input
          type="text"
          class="control-input-filter-price"
          pInputText
          placeholder="от 100 000 ₽"
          [(ngModel)]="minProfit"
          name="minProfit"
        />
        <input
          type="text"
          class="control-input-filter-price"
          pInputText
          placeholder="до 100 000 000 ₽"
          [(ngModel)]="maxProfit"
          name="maxProfit"
        />
      </div>
    </div>
    <div class="btn-wrapper">
      <button
        class="btn btn--aside btn-default btn-sm mt-3 btn-filter"
        (click)="onFilterBusinessesWithPaginationAsync()"
      >
        Применить фильтры
      </button>
      <button
        class="btn btn--aside btn-default btn-sm mt-3 btn-filter ml-1"
        (click)="onClearFilters()"
      >
        Очистить фильтры
      </button>
    </div>
  </div>

  <!-- Список бизнеса. -->
  <!-- <div class="d-flex popular-list franchise-list">
  <div class="popular-item catalog-item col-lg-4" *ngFor="let item of aBusinessList">
    <p-card header="{{item.title}}" subheader="{{item.text}}"
    [style]="{width: '100%'}" styleClass="p-card-shadow">
    <ng-template pTemplate="header">
      <img [src]="item.url">
    </ng-template>
    <strong>{{item.textDoPrice}} {{item.price}} ₽</strong>
    <ng-template pTemplate="footer">
      <button class="btn btn-default btn-filter" (click)="routeViewFranchiseCardAsync(item.franchiseId)">Подробнее</button>
    </ng-template>
  </p-card>
  </div>
</div> -->

  <div class="d-flex popular-list">
    <div class="popular-item" *ngFor="let item of aBusinessList">
      <p-card
        header="{{ item.title }}"
        subheader="{{ item.fullText }}"
        [style]="{ width: '100%' }"
        styleClass="p-card-shadow"
      >
        <ng-template pTemplate="header">
          <img [src]="item.url" />
        </ng-template>
        <strong>{{ item.textDoPrice }} {{ item.price | priceFormat:item.price }} ₽</strong>
        <ng-template pTemplate="footer">
          <button
            class="btn btn-default btn-filter"
            (click)="routeViewFranchiseCardAsync(item.businessId)"
          >
            Подробнее
          </button>
        </ng-template>
      </p-card>
    </div>
  </div>
</div>

<!-- Пагинация. -->
<div class="mt-5">
  <p-paginator
    [rows]="10"
    [totalRecords]="countTotalPage"
    [rowsPerPageOptions]="aRowsPerPageOptions"
    [showCurrentPageReport]="true"
    (onPageChange)="onPaginationChangeAsync($event)"
  >
  </p-paginator>
</div>

<!-- Новый бизнес. -->
<div class="garant">
  <p-carousel
    [value]="aNewFranchises"
    [numVisible]="4"
    [numScroll]="4"
    [circular]="false"
    [responsiveOptions]="responsiveOptions"
    [showNavigators]="false"
  >
    <ng-template pTemplate="header">
      <h5 class="title-franchise">Новый бизнес</h5>
    </ng-template>
    <ng-template let-item pTemplate="item">
      <div class="product-item">
        <div class="product-item-content">
          <div class="p-mb-3">
            <img [src]="item.url" class="product-image" />
          </div>
          <div>
            <p-card
              header="Название готового бизнеса"
              subheader="{{ item.fullText }}"
              [style]="{ width: '100%' }"
              styleClass="p-card-shadow"
            >
              <ng-template pTemplate="header">
                <!-- <img alt="Card" src="assets/showcase/images/usercard.png"> -->
              </ng-template>
              <strong>{{ item.textDoPrice }} {{ item.price | priceFormat: item.price }} ₽</strong>
              <ng-template pTemplate="footer">
                <!-- <p-button label="Save" icon="pi pi-check"></p-button>
                          <p-button label="Cancel" icon="pi pi-times" styleClass="p-button-secondary" [style]="{'margin-left': '.5em'}"></p-button> -->
              </ng-template>
            </p-card>
          </div>
        </div>
      </div>
    </ng-template>
  </p-carousel>
</div>

<!-- Отзывы о франшизах -->
<!-- <div class="d-flex garant">
<div class="col-lg-8">
  <p-carousel [value]="aReviewsFranchises" [numVisible]="2" [numScroll]="2" [circular]="false" [responsiveOptions]="responsiveOptions" [showNavigators]="false">
    <ng-template pTemplate="header">
      <h5 class="title-franchise">Отзывы о франшизах</h5>
    </ng-template>
    <ng-template let-item pTemplate="item">
        <div class="product-item">
            <div class="product-item-content">
                <div class="p-mb-3">
                    <img [src]="item.url" class="product-image">
                </div>
                <div>
                  <p-card header="Название готового бизнеса" subheader="{{item.fullText}}"
                    [style]="{width: '100%'}" styleClass="p-card-shadow">
                    <ng-template pTemplate="header">
                      
                    </ng-template>
                    <strong>{{item.textDoPrice}} {{item.price}} ₽</strong>
                    <ng-template pTemplate="footer">

                    </ng-template>
                  </p-card>
                </div>
            </div>
        </div>
    </ng-template>
</p-carousel>
</div>

<div class="col-lg-4">
  <h5 class="title-franchise">Покупка бизнеса с гарантиями</h5> 
  <p-card header="{{oTopAction.title}}" subheader="" [style]="{width: '100%'}" styleClass="card">
    <ng-template pTemplate="header">

    </ng-template>
    <p>{{oTopAction.text}}</p>
    <ng-template pTemplate="footer">
      <button class="btn btn-dark">Подробнее</button>
    </ng-template>
  </p-card>
</div>
</div> -->

<div class="row" *ngIf="isHideBusinessWithGarant">
  <div class="col-lg-12 col-xs-12 garant card-line">
    <p-card class="card-line-wrapper">
      <ng-template pTemplate="header">
        <strong>Вы можете приобрести бизнес с гарантиями</strong>
        <button
          type="button"
          class="close"
          aria-label="Close"
          (click)="isHideBusinessWithGarant = !isHideBusinessWithGarant"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </ng-template>
      <p>{{ oSuggestion.text }}</p>
      <ng-template pTemplate="footer">
        <div class="d-flex">
          <div class="ml-1">
            <button class="btn btn-dark" routerLink="/deal/start">
              {{ oSuggestion.button2Text }}
            </button>
          </div>

          <div>
            <button
              class="btn btn-default btn-show-more"
              (click)="isHideBusinessWithGarant = !isHideBusinessWithGarant"
            >
              {{ oSuggestion.button1Text }}
            </button>
          </div>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>

<!-- Область с банерами (2 картинки). -->
<div class="d-flex block-baner garant">
  <img class="baner" src="../../../assets/images/Rectangle 13.png" />
  <img class="baner" src="../../../assets/images/Rectangle 14.png" />
</div>

<!-- Область с 3 карточками. -->
<div class="d-flex three-cards">
  <div class="col-lg-4 card-business" *ngFor="let item of aDataActions">
    <p-card
      class="three-cards-wrapper"
      header="{{ item.title }}"
      subheader="{{ item.subTitle }}"
      [style]="{ width: '100%' }"
      styleClass="card"
    >
      <ng-template pTemplate="header">
        <!-- <img alt="Card" src="assets/showcase/images/usercard.png"> -->
      </ng-template>
      <p>{{ item.text }}</p>
      <ng-template pTemplate="footer">
        <!-- <p-button label="Save" icon="pi pi-check"></p-button> -->
        <button class="btn btn-dark">{{ item.buttonText }}</button>
        <!-- <p-button label="Cancel" icon="pi pi-times" styleClass="p-button-secondary" [style]="{'margin-left': '.5em'}">
        </p-button> -->
      </ng-template>
    </p-card>
  </div>
</div>

<!-- Бизнес блог. -->
<h5 class="garant title-franchise">Бизнес блог</h5>
<div class="d-flex popular-list-blog">
  <div class="popular-item-blog" *ngFor="let item of aBlogs">
    <p-card
      class="popular-item-blog-wrapper1"
      header="{{ item.title }}"
      subheader=""
      [style]="{ width: '100%' }"
      styleClass="p-card-shadow"
    >
      <ng-template pTemplate="header">
        <img [src]="item.url" />
      </ng-template>

      <ng-template pTemplate="footer"> </ng-template>
    </p-card>
  </div>

  <div class="popular-item-blog">
    <p-card
      class="popular-item-blog-wrapper2"
      header="Больше статей"
      subheader=""
      [style]="{ width: '100%' }"
      styleClass="p-card-shadow"
    >
      <ng-template pTemplate="header"> </ng-template>

      <div class="d-flex">
        <p>
          Перейдите в наш блог и найдите <br />
          там массу полезной информации.
        </p>
        <div class="image">
          <img src="../../../assets/images/Frame 66.png" height="32" />
        </div>
      </div>
      <ng-template pTemplate="footer"> </ng-template>
    </p-card>
  </div>
</div>

<!-- Новости делового мира. -->
<h5 class="garant title-franchise">Новости делового мира</h5>
<div class="d-flex">
  <div>
    <img src="../../../assets/images/Frame 31.png" />
  </div>

  <div>
    <div class="news-item" *ngFor="let item of aNews">
      <img [src]="item.url" />
      <strong class="news-title">{{ item.name }}</strong>
      <div class="news-bottom-line">
        <small>{{ item.time }}</small>
        <img class="ellipse" src="../../../assets/images/Ellipse 13.png" />
        <small>{{ item.date }}</small>
        <img class="ellipse" src="../../../assets/images/Ellipse 13.png" />
        <small>{{ item.type }}</small>
      </div>
    </div>
  </div>
</div>

<!-- Категории готового бизнеса. -->
<div class="row garant">
  <!-- <div class="d-flex"> -->
  <div class="col-6">
    <h5 class="title-franchise">Категории готового бизнеса</h5>
    <div class="row">
      <!-- 1 столбец. -->
      <div class="col-6">
        <!-- <div class="category-block-first"> -->
        <div>
          <div class="category-item" *ngFor="let item of categoryList1">
            <img class="space-right-image-category" [src]="item.url" />
            <span class="category-text">{{ item.name }}</span>
            <img
              class="space-right-image-category space-arrow-category"
              src="../../../assets/images/Arrow 1.png"
            />
          </div>
        </div>
      </div>

      <!-- 2 столбец -->
      <div class="col-6">
        <!-- <div class="garant">&nbsp;</div> -->
        <div class="category-item" *ngFor="let item of categoryList2">
          <img class="space-right-image-category" [src]="item.url" />
          <span class="category-text">{{ item.name }}</span>
          <img
            class="space-right-image-category space-arrow-category"
            src="../../../assets/images/Arrow 1.png"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="col-6">
    <h5 class="title-franchise">Категории франшиз</h5>
    <div class="row">
      <!-- 3 столбец. -->
      <div class="col-6">
        <!-- <div class="category-block-second"> -->
        <div>
          <div class="category-item" *ngFor="let item of categoryList3">
            <img class="space-right-image-category" [src]="item.url" />
            <span class="category-text">{{ item.name }}</span>
            <img
              class="space-right-image-category space-arrow-category"
              src="../../../assets/images/Arrow 1.png"
            />
          </div>
        </div>
      </div>

      <!-- 4 столбец -->
      <div class="col-6">
        <!-- <div class="garant">&nbsp;</div> -->
        <div class="category-item" *ngFor="let item of categoryList4">
          <img class="space-right-image-category" [src]="item.url" />
          <span class="category-text">{{ item.name }}</span>
          <img
            class="space-right-image-category space-arrow-category"
            src="../../../assets/images/Arrow 1.png"
          />
        </div>
      </div>
    </div>
  </div>
  <!-- </div> -->
</div>
