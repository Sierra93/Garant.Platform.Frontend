<div class="block-garant d-flex justify-content-between mt-70">
  <!-- Левый блок. -->
  <div class="col-3 block-left">
    <h5 class="block-left__title">{{ oInitData.blockLeftTitle }}</h5>

    <div class="left-panel-first mt-32 block-left-sides">
      <div class="block-left-sides__title">Сделка проходит между</div>
      <hr class="hr-small" />

      <!-- <div> -->
      <!-- <div> -->
      <strong class="block-left-sides__name">{{ oInitData.fullName }}</strong>
      <!-- <br> -->
      <span class="block-left-sides__role">
        {{ oInitData.role }}
      </span>
      <!-- </div> -->

      <hr />

      <!-- <div> -->
      <strong class="block-left-sides__name">{{
        oInitData.otherUserFullName
      }}</strong>
      <!-- <br> -->
      <span class="block-left-sides__role">
        {{ oInitData.otherUserRole }}
      </span>
      <!-- </div> -->
      <!-- </div> -->
    </div>

    <div class="left-panel-first mt-32 block-left-deal">
      <div class="block-left-deal__title">
        {{ oInitData.blockLeftSumTitle }}
      </div>
      <hr class="hr-small" />

      <!-- <div> -->
      <div class="block-left-deal__sum">{{ oInitData.totalAmount }} ₽</div>

      <button class="block-left-deal__button">Цена изменилась</button>

      <hr class="hr-short" />

      <!-- <div> -->
      <strong class="block-left-deal__item">{{
        oInitData.mainItemTitle
      }}</strong>
      <!-- </div> -->

      <hr />

      <div class="block-left-deal__image">
        <img [src]="oInitData.imageUrl" />
      </div>

      <div class="block-left-deal__name">
        {{ oInitData.itemTitle }}
      </div>
      <!-- </div> -->
    </div>

    <div class="left-panel-first mt-32 block-left-patterns">
      <div class="block-left-patterns__title">
        <img
          class="img-left"
          src="../../../../assets/images/garant/file.png"
          alt="папка"
        />{{ oInitData.blockDocumentsTemplatesName
        }}<img
          class="img-right"
          src="../../../../assets/images/garant/arrow.png"
          alt="стрелка"
        />
      </div>
      <small class="block-left-patterns__text">{{
        oInitData.blockDocumentsTemplatesDetail
      }}</small>
    </div>

    <div class="left-panel-first mt-32 block-left-documents">
      <div class="block-left-documents__title">
        <img
          class="img-left"
          src="../../../../assets/images/garant/file.png"
          alt="папка"
        />{{ oInitData.documentBlockTitle
        }}<img
          class="img-right"
          src="../../../../assets/images/garant/arrow.png"
          alt="стрелка"
        />
      </div>

      <div class="hr"></div>

      <div class="block-left-documents__list">
        <button
          *ngFor="let item of aDocumants"
          class="block-left-documents__button"
        >
          <img
            class="img-left"
            src="../../../../assets/images/garant/5876007_action_arrow_down_download_save_icon 1.png"
            alt="сохранить"
          />
          {{ item }}
        </button>
      </div>
      <!-- <small class="block-left-documents__no">Документов еще нет</small> -->
    </div>
  </div>

  <!-- Левый блок. -->
  <!-- <div class="col-3">
    <h5>{{oInitData.blockLeftTitle}}</h5>

    <div class="left-panel-first mt-32">
      <div>Сделка проходит между</div>
      <hr>

      <div>
        <div>
          <strong>{{oInitData.fullName}}</strong>
          <br>
          {{oInitData.role}}
        </div>

        <hr>

        <div>
          <strong>{{oInitData.otherUserFullName}}</strong>
          <br>
          {{oInitData.otherUserRole}}
        </div>
      </div>
    </div>

    <div class="left-panel-first mt-32">
      <div>{{oInitData.blockLeftSumTitle}}</div>
      <hr>

      <div>
        <div>
          {{oInitData.totalAmount}} ₽
        </div>

        <hr>

        <div>
          <strong>{{oInitData.mainItemTitle}}</strong>
        </div>

        <hr>

        <div>
          <img [src]="oInitData.imageUrl">
        </div>

        <div>
          {{oInitData.itemTitle}}
        </div>
      </div>
    </div>

    <div class="left-panel-first mt-32">
      <strong>Согласованный список этапов и стоимость</strong>

      <div *ngFor="let item of aInvestInclude; let i = index">
        <div>
          {{item.Name}}
        </div>

        <div> -->
  <!-- Стоимость этапа<br> -->
  <!-- {{item.Price}} ₽
        </div>

        <hr>
      </div>
    </div>

    <div class="left-panel-first mt-32">
      <div>{{oInitData.blockDocumentsTemplatesName}}</div>
      <small>{{oInitData.blockDocumentsTemplatesDetail}}</small>
    </div>

    <div class="left-panel-first mt-32">
      <div>{{oInitData.documentBlockTitle}}</div>
      <div *ngFor="let item of aDocumants">
        {{item}}
      </div> -->

  <!-- <small *ngIf="aDocumants.length == 0">Документов еще нет</small> -->
  <!-- </div>
  </div> -->

  <!-- Правый блок. -->
  <!-- Область с чатом. -->
  <div class="col-9 block-right">
    <h5 class="block-right__title">{{ oInitData.blockRightTitle }}</h5>

    <div class="right-panel-first mt-32 block-right-chat">
      <div class="">
        <!-- <h5>Чат с {{fio}}</h5> -->
        <div class="">
          <div class="d-flex justify-content-between">
            <div class="d-flex">
              <!-- <img class="space-intgr mr-16" src="{{chatItemUrl}}"> -->

              <div>
                <strong class="block-right-chat__title">{{
                  oInitData.blackBlockTitle
                }}</strong>

                <div>
                  <small class="block-right-chat__subtitle"
                    >Согласование началось {{ oInitData.dateStartDeal }}</small
                  >
                </div>
              </div>
            </div>

            <div>Начало чата: {{ dateStartDialog }}</div>
          </div>

          <hr />

          <div class="block-chat block-right-chat__body">
            <div class="" *ngFor="let item of aMessages">
              <div class="block-messages">
                <div
                  class="block-right-chat__message"
                  [ngClass]="{ messageEnd: item.isMyMessage }"
                >
                  {{ item.message }}
                </div>
              </div>
            </div>
          </div>

          <div class="block-right-chat__container">
            <img
              class="img-left"
              src="../../../../assets/images/garant/5172585_attachment_binder_clip_paper_icon 2.png"
              alt="скрепка"
            />
            <div class="block-right-chat__textareawrapper">
              <textarea
                class="area-message block-right-chat__textarea"
                rows="2"
                cols="30"
                pInputTextarea
                [autoResize]="true"
                placeholder="Отправьте комментарий по поводу этапов сделки или предложить изменение"
                [(ngModel)]="message"
                (keydown.enter)="onSendMessageAsync()"
              ></textarea>
              <img
                class="img-right"
                src="../../../../assets/images/garant/icons.png"
                alt="стрелка вправо"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Правый блок. -->
    <!-- <div class="col-9">
    <h5>{{oInitData.blockRightTitle}}</h5> -->

    <!-- Область с чатом. -->
    <!-- <div class="right-panel-first mt-32">
      <div class=""> -->
    <!-- <h5>Чат с {{fio}}</h5> -->
    <!-- <div class="">

          <div class="d-flex justify-content-between">
            <div class="d-flex"> -->
    <!-- <img class="space-intgr mr-16" src="{{chatItemUrl}}"> -->

    <!-- <div>
                <strong>{{oInitData.blackBlockTitle}}</strong>
                
                <div>
                  <small>Согласование началось {{oInitData.dateStartDeal}}</small>
                </div>
              </div>
            </div> -->

    <!-- <div>
              Начало чата: {{dateStartDialog}}
            </div> -->
    <!-- </div>

          <hr>

          <div class="block-chat">
            <div class="" *ngFor="let item of aMessages">
              <div class="block-messages">
                <div class="message" [ngClass]="{messageEnd:item.isMyMessage}">
                  {{item.message}}
                </div>
              </div>
            </div>
          </div>

          <div>
            <textarea class="area-message" rows="2" cols="30" pInputTextarea [autoResize]="true"
              placeholder="Введите сообщение" [(ngModel)]="message" (keydown.enter)="onSendMessageAsync()"></textarea>
          </div>
        </div>
      </div>
    </div> -->

    <!-- Область с этапами. -->
    <div
      class="right-panel-second mt-32 block-right-stages"
      *ngFor="let item of aInvestInclude; let i = index"
    >
      <div class="block-right-stages__title">
        Этап №{{ i + 1 }} - {{ item.Name }}
      </div>

      <!-- <hr class="hr-1"> -->

      <div class="block-right-stages__sumtitle">
        Стоимость этапа - {{ item.Price }} ₽
      </div>
      <!-- <div class="block-right-stages__sum">

      </div> -->

      <hr />

      <div *ngIf="oInitData.isOwner" class="block-right-stages__acttitle">
        <!-- <strong> -->
        {{ oInitData.blockRightStatusTitle }}
        <!-- </strong> -->
      </div>

      <div *ngIf="!oInitData.isOwner && aCustomerActs[i] == null">
        <strong>{{ oInitData.contractTitle }}</strong>
      </div>

      <div class="block-right-stages__acttext">
        <!-- <small> -->
        Прикрепите согласованный файл в формате .pdf и ожидайте подтверждения от
        продавца
        {{ oInitData.contractText }}
        <!-- </small> -->
      </div>

      <div *ngIf="oInitData.isOwner && aVendorActs[i] == null">
        <label class="file-label">
          <input
            type="file"
            class="file-input"
            (change)="onAttachmentActDocument($event)"
          />
          Прикрепить
        </label>
      </div>

      <div *ngIf="!oInitData.isOwner && aCustomerActs[i] == null">
        <label class="file-label">
          <input
            type="file"
            class="file-input"
            (change)="onAttachmentActDocument($event)"
          />
          Прикрепить
        </label>
      </div>

      <div
        *ngIf="oInitData.isOwner && aVendorActs[i] != null"
        class="block-right-stages__actfilename"
        class="block-right-contract__filename"
      >
        <img
          class="img-left"
          src="../../../../assets/images/garant/paperclip 1.png"
          alt="треугольник"
        />
        {{ aVendorActs[i].documentName
        }}<img class="x" src="../../../../assets/images/garant/x.png" alt="x" />
      </div>

      <div *ngIf="!oInitData.isOwner && aCustomerActs[i] != null">
        {{ aCustomerActs[i].documentName }}
      </div>

      <hr class="hr-2" />

      <div class="block-right-stages__body">Входит в этап:</div>
      <ul *ngFor="let iteration of item.Items" class="block-right-stages__list">
        <li class="block-right-stages__item">{{ iteration }}</li>
      </ul>

      <hr class="hr-3" />

      <div class="d-flex block-right-stages__buttons">
        <div *ngIf="oInitData.isOwner">
          <div
            class="d-flex justify-content-end"
            *ngIf="
              (oInitData.buttonActionText !== '' &&
                oInitData.buttonActionText !== null &&
                oInitData.isOwner &&
                aCustomerActs[i] == null) ||
              (!aCustomerActs[i].isAcceptDocument && aVendorActs[i] == null) ||
              !aVendorActs[i].isAcceptDocument
            "
          >
            <button
              class="control-button-blue-small"
              (click)="onAttachDocumentActAsync(i)"
            >
              <!--   [disabled]="oInitData.isOwner && aVendorActs[i - 1] != null && !aVendorActs[i - 1].isPay"  -->
              {{ oInitData.buttonActionText }}
            </button>
          </div>

          <div
            class="d-flex justify-content-end"
            *ngIf="
              oInitData.buttonActionText !== '' &&
              oInitData.buttonActionText !== null &&
              oInitData.isOwner &&
              aCustomerActs[i] != null &&
              !aCustomerActs[i].isAcceptDocument
            "
          >
            <button
              class="control-button-blue-small"
              (click)="
                onApproveDocumentActCustomerAsync(aCustomerActs[i].documentType)
              "
            >
              <!-- [disabled]="oInitData.isOwner && aVendorActs[i - 1] != null && !aVendorActs[i - 1].isPay"  -->
              {{ oInitData.buttonActionTextContract }}
            </button>
          </div>
        </div>
        <!-- TODO: -->
        <div class="d-flex justify-content-end">
          <button
            class="control-button-blue-small"
            *ngIf="!oInitData.isOwner"
            (click)="onAttachDocumentActAsync(i)"
          >
            {{ oInitData.blackBlockText }}
          </button>
        </div>

        <div
          class="d-flex justify-content-end"
          *ngIf="
            oInitData.buttonActionText !== '' &&
            oInitData.buttonActionText !== null &&
            !oInitData.isOwner &&
            aVendorActs[i] != null &&
            !aVendorActs[i].isAcceptDocument
          "
        >
          <button
            class="control-button-blue-small"
            [disabled]="
              !oInitData.isOwner &&
              aCustomerActs[i - 1] != null &&
              !aCustomerActs[i - 1].isPay
            "
            (click)="
              onApproveDocumentActVendorAsync(aVendorActs[i].documentType)
            "
          >
            {{ oInitData.buttonActionText }}
          </button>
        </div>

        <div
          class="d-flex justify-content-end"
          *ngIf="
            oInitData.buttonActionTextContract !== '' &&
            oInitData.buttonActionTextContract !== null
          "
        >
          <!-- <button class="control-button-blue-small"
                  [disabled]="!oInitData.isOwner && aCustomerActs[i] != null 
                  && !aCustomerActs[i].isPay"
                  (click)="onAttachDocumentActAsync(i)">
            {{oInitData.buttonActionTextContract}} {{item.Price | formatPrice}} ₽
          </button> -->
          <button
            class="control-button-blue-small"
            (click)="onPaymentIterationCustomerAsync(i)"
          >
            {{ oInitData.buttonActionTextContract }}
            {{ item.Price | formatPriceGarant }} ₽
          </button>
        </div>

        <!-- <div class="d-flex justify-content-end mr-16" *ngIf="oInitData.buttonActionText !== '' 
                    && oInitData.buttonActionText !== null 
                    && !oInitData.isOwner
                    && aVendorActs[i] != null
                    && aVendorActs[i].isAcceptDocument
                    && aCustomerActs[i] != null
                    && aCustomerActs[i].isAcceptDocument">
          <button class="control-button-blue-small"
            [disabled]="!oInitData.isOwner && aCustomerActs[i - 1] != null && !aCustomerActs[i - 1].isPay"
            (click)="onApproveDocumentActVendorAsync(aVendorActs[i].documentType)">
            {{oInitData.buttonActionTextContract}}
          </button>
        </div> -->
      </div>

      <div class="block-right-stages__info">
        После оплаты акта вы сможете утвердить его посредством подписанного акта
        приема-передачи
      </div>
    </div>

    <div
      class="d-flex justify-content-end"
      *ngIf="
        oInitData.continueButtonText !== '' &&
        oInitData.continueButtonText !== null
      "
    >
      <button class="control-button-blue-small" [disabled]="!isEndDeal">
        {{ oInitData.continueButtonText }}
      </button>
    </div>
  </div>
</div>

<!-- Область с этапами. -->
<!-- <div class="right-panel-second mt-32" *ngFor="let item of aInvestInclude; let i = index">          
        <div>
          <strong>Этап №{{i+1}}: {{item.Name}}</strong>
        </div>      

        <div>
          <small>
            Стоимость этапа
            {{item.Price}} ₽
          </small>
        </div>

        <hr> -->

<!-- <div *ngIf="oInitData.isOwner">
            <strong>{{oInitData.blockRightStatusTitle}}</strong>
        </div>

        <div *ngIf="!oInitData.isOwner && aCustomerActs[i] == null">
          <strong>{{oInitData.contractTitle}}</strong>
        </div>

        <div>
            <small>
                {{oInitData.contractText}}
            </small>
        </div> -->

<!-- <div *ngIf="oInitData.isOwner && aVendorActs[i] == null">
          <input type="file" (change)="onAttachmentActDocument($event)">
        </div>

        <div *ngIf="!oInitData.isOwner && aCustomerActs[i] == null">
          <input type="file" (change)="onAttachmentActDocument($event)">
        </div>

        <div *ngIf="oInitData.isOwner && aVendorActs[i] != null">
          {{aVendorActs[i].documentName}}
        </div>      

        <div *ngIf="!oInitData.isOwner && aCustomerActs[i] != null">
          {{aCustomerActs[i].documentName}}
        </div>      -->

<!-- <hr>        
    
        <div>
          Входит в этап:
          <ul *ngFor="let iteration of item.Items">
            <li>{{iteration}}</li>
          </ul>
        </div>       -->

<!-- <div class="d-flex">
          <div *ngIf="oInitData.isOwner">
            <div class="d-flex justify-content-end mr-16" *ngIf="oInitData.buttonActionText !== '' 
                      && oInitData.buttonActionText !== null 
                      && oInitData.isOwner
                      && aCustomerActs[i] == null               
                      || !aCustomerActs[i].isAcceptDocument
                      && aVendorActs[i] == null
                      || !aVendorActs[i].isAcceptDocument">
            <button class="control-button-blue-small" 
                  
                    (click)="onAttachDocumentActAsync(i)"> -->
<!--   [disabled]="oInitData.isOwner && aVendorActs[i - 1] != null && !aVendorActs[i - 1].isPay"  -->
<!-- {{oInitData.buttonActionText}}
            </button>
          </div>           -->

<!-- <div class="d-flex justify-content-end mr-16" *ngIf="oInitData.buttonActionText !== '' 
                      && oInitData.buttonActionText !== null 
                      && oInitData.isOwner
                      && aCustomerActs[i] != null                       
                      && !aCustomerActs[i].isAcceptDocument">
            <button class="control-button-blue-small" 
                    
                    (click)="onApproveDocumentActCustomerAsync(aCustomerActs[i].documentType)"> -->
<!-- [disabled]="oInitData.isOwner && aVendorActs[i - 1] != null && !aVendorActs[i - 1].isPay"  -->
<!-- {{oInitData.buttonActionTextContract}}
            </button>
          </div>
          </div> -->
<!-- TODO: -->
<!-- <div class="d-flex justify-content-end mr-16">
            <button class="control-button-blue-small"
            *ngIf="!oInitData.isOwner"
              (click)="onAttachDocumentActAsync(i)">
              {{oInitData.blackBlockText}}
            </button>
          </div>

          <div class="d-flex justify-content-end mr-16" *ngIf="oInitData.buttonActionText !== '' 
                      && oInitData.buttonActionText !== null 
                      && !oInitData.isOwner
                      && aVendorActs[i] != null
                      && !aVendorActs[i].isAcceptDocument">
            <button class="control-button-blue-small" 
                    [disabled]="!oInitData.isOwner && aCustomerActs[i - 1] != null && !aCustomerActs[i - 1].isPay" 
                    (click)="onApproveDocumentActVendorAsync(aVendorActs[i].documentType)">
              {{oInitData.buttonActionText}}
            </button>
          </div>

          <div class="d-flex justify-content-end mr-16" *ngIf="oInitData.buttonActionTextContract !== '' 
                      && oInitData.buttonActionTextContract !== null"> -->
<!-- <button class="control-button-blue-small"
                    [disabled]="!oInitData.isOwner && aCustomerActs[i] != null 
                    && !aCustomerActs[i].isPay"
                    (click)="onAttachDocumentActAsync(i)">
              {{oInitData.buttonActionTextContract}} {{item.Price | formatPrice}} ₽
            </button> -->
<!-- <button class="control-button-blue-small"                    
                    (click)="onPaymentIterationCustomerAsync(i)">
              {{oInitData.buttonActionTextContract}} {{item.Price | formatPriceGarant}} ₽
            </button>
          </div> -->

<!-- <div class="d-flex justify-content-end mr-16" *ngIf="oInitData.buttonActionText !== '' 
                      && oInitData.buttonActionText !== null 
                      && !oInitData.isOwner
                      && aVendorActs[i] != null
                      && aVendorActs[i].isAcceptDocument
                      && aCustomerActs[i] != null
                      && aCustomerActs[i].isAcceptDocument">
            <button class="control-button-blue-small"
              [disabled]="!oInitData.isOwner && aCustomerActs[i - 1] != null && !aCustomerActs[i - 1].isPay"
              (click)="onApproveDocumentActVendorAsync(aVendorActs[i].documentType)">
              {{oInitData.buttonActionTextContract}}
            </button>
          </div> -->
<!-- </div>
      </div>     -->

<!-- <div class="d-flex justify-content-end"
      *ngIf="oInitData.continueButtonText !== '' && oInitData.continueButtonText !== null">
      <button class="control-button-blue-small" [disabled]="!isEndDeal">{{oInitData.continueButtonText}}</button>
    </div>
  </div>
</div> -->
